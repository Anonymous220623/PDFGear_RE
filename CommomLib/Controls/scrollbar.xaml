<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:CommomLib.Controls"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:appTheme="clr-namespace:CommomLib.AppTheme">
  <ResourceDictionary.MergedDictionaries>
    <appTheme:ThemeResourceDictionary FollowMainThemeResourceTheme="true">
      <appTheme:ThemeResourceDictionary.ThemeResources>
        <ResourceDictionary x:Key="Light">
          <SolidColorBrush x:Key="ScrollBar.Static.Background" Color="#F9F9F9"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Border" Color="#F0F0F0"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Glyph" Color="#72000000"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Thumb" Color="#72000000"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Background" Color="#DADADA"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Border" Color="#DADADA"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Glyph" Color="#9E000000"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Thumb" Color="#72000000"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Background" Color="#606060"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Border" Color="#606060"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Thumb" Color="#72000000"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Glyph" Color="#9E000000"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Background" Color="#F0F0F0"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Border" Color="#F0F0F0"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Glyph" Color="#51000000"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Thumb" Color="#51000000"/>
        </ResourceDictionary>
        <ResourceDictionary x:Key="Dark">
          <SolidColorBrush x:Key="ScrollBar.Static.Background" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Border" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Glyph" Color="#8BFFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Static.Thumb" Color="#8BFFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Background" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Border" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Glyph" Color="#C5FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.MouseOver.Thumb" Color="#8BFFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Background" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Border" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Thumb" Color="#8BFFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Pressed.Glyph" Color="#C5FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Background" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Border" Color="#00FFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Glyph" Color="#3FFFFFFF"/>
          <SolidColorBrush x:Key="ScrollBar.Disabled.Thumb" Color="#3FFFFFFF"/>
        </ResourceDictionary>
      </appTheme:ThemeResourceDictionary.ThemeResources>
    </appTheme:ThemeResourceDictionary>
  </ResourceDictionary.MergedDictionaries>
  <sys:Double x:Key="ScrollBar.Horizontal.Height">12</sys:Double>
  <sys:Double x:Key="ScrollBar.Vertical.Width">12</sys:Double>
  <sys:Double x:Key="ScrollBar.Horizontal.LargeHeight">16</sys:Double>
  <sys:Double x:Key="ScrollBar.Vertical.LargeWidth">16</sys:Double>
  <sys:Double x:Key="ScrollBar.Horizontal.CollapsedHeight">6</sys:Double>
  <sys:Double x:Key="ScrollBar.Vertical.CollapsedWidth">6</sys:Double>
  <sys:Double x:Key="ScrollBar.HorizontalThumb.Height">6</sys:Double>
  <sys:Double x:Key="ScrollBar.VerticalThumb.Width">6</sys:Double>
  <sys:Double x:Key="ScrollBar.HorizontalThumb.CollapsedHeight">2</sys:Double>
  <sys:Double x:Key="ScrollBar.VerticalThumb.CollapsedWidth">2</sys:Double>
  <sys:Double x:Key="ScrollBar.HorizontalThumb.LargeHeight">10</sys:Double>
  <sys:Double x:Key="ScrollBar.VerticalThumb.LargeWidth">10</sys:Double>
  <sys:Double x:Key="ScrollBar.HorizontalButton.Width">13</sys:Double>
  <sys:Double x:Key="ScrollBar.VerticalButton.Height">13</sys:Double>
  <sys:Double x:Key="ScrollBar.Thumb.CollapsedOffset">-3</sys:Double>
  <sys:Double x:Key="ScrollBar.Thumb.Offset">-3</sys:Double>
  <sys:Double x:Key="ScrollBar.Thumb.LargeOffset">-3</sys:Double>
  <Duration x:Key="ScrollBarOpacityChangeDuration">00:00:00.167</Duration>
  <sys:TimeSpan x:Key="ScrollBarCollapsedDelay">00:00:00.50</sys:TimeSpan>
  <sys:TimeSpan x:Key="ScrollBarExpandBeginTime">00:00:00.40</sys:TimeSpan>
  <sys:String x:Key="ScrollBarExpandedTag">ScrollBar.Expanded</sys:String>
  <sys:String x:Key="ScrollBarCollapsedTag">ScrollBar.Collapsed</sys:String>
  <Style x:Key="FocusVisual">
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate>
          <Rectangle Margin="2" SnapsToDevicePixels="true"
                     Stroke="{DynamicResource {x:Static JetSystemColors.ControlTextBrushKey}}" StrokeThickness="1"
                     StrokeDashArray="1 2"/>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="RepeatButtonTransparent" TargetType="{x:Type RepeatButton}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="true"/>
    <Setter Property="Control.Background" Value="Transparent"/>
    <Setter Property="UIElement.Focusable" Value="false"/>
    <Setter Property="Control.IsTabStop" Value="false"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type RepeatButton}">
          <Rectangle Fill="{TemplateBinding Control.Background}" Height="{TemplateBinding FrameworkElement.Height}"
                     Width="{TemplateBinding FrameworkElement.Width}"/>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ScrollBarButton" TargetType="{x:Type RepeatButton}">
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
    <Setter Property="Control.BorderThickness" Value="1"/>
    <Setter Property="Control.HorizontalContentAlignment" Value="Center"/>
    <Setter Property="Control.VerticalContentAlignment" Value="Center"/>
    <Setter Property="Control.Padding" Value="0"/>
    <Setter Property="UIElement.Focusable" Value="false"/>
    <Setter Property="Control.IsTabStop" Value="false"/>
    <Setter Property="UIElement.SnapsToDevicePixels" Value="false"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type RepeatButton}">
          <Border x:Name="border" BorderThickness="1" Background="Transparent" BorderBrush="Transparent"
                  RenderTransformOrigin="0.5,0.5">
            <UIElement.RenderTransform>
              <ScaleTransform x:Name="borderTrans"/>
            </UIElement.RenderTransform>
            <ContentPresenter x:Name="contentPresenter" Margin="{TemplateBinding Control.Padding}"
                              SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}"
                              HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                              VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}" Focusable="false"/>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="ButtonBase.IsPressed" Value="true">
              <TriggerBase.EnterActions>
                <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="borderTrans" Storyboard.TargetProperty="ScaleX" To="0.87" Duration="0"/>
                    <DoubleAnimation Storyboard.TargetName="borderTrans" Storyboard.TargetProperty="ScaleY" To="0.87" Duration="0"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="borderTrans" Storyboard.TargetProperty="ScaleX" To="1" Duration="0"/>
                    <DoubleAnimation Storyboard.TargetName="borderTrans" Storyboard.TargetProperty="ScaleY" To="1" Duration="0"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.ExitActions>
            </Trigger>
            <Trigger Property="UIElement.IsEnabled" Value="false">
              <Setter TargetName="contentPresenter" Property="UIElement.Opacity" Value="0.56"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Storyboard x:Key="ModernScrollBarThumbVerticalCollapsedAnimation">
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="VerticalThumbTrans" Storyboard.TargetProperty="X"
                     To="{StaticResource ScrollBar.Thumb.CollapsedOffset}"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Width"
                     To="{StaticResource ScrollBar.VerticalThumb.CollapsedWidth}"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBarThumbHorizontalCollapsedAnimation">
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="HorizontalThumbTrans" Storyboard.TargetProperty="Y"
                     To="{StaticResource ScrollBar.Thumb.CollapsedOffset}"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Height"
                     To="{StaticResource ScrollBar.HorizontalThumb.CollapsedHeight}"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
  </Storyboard>
  <Style x:Key="ModernScrollBarThumbVerticalStyle" TargetType="{x:Type Thumb}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="true"/>
    <Setter Property="Control.IsTabStop" Value="false"/>
    <Setter Property="FrameworkElement.MinWidth" Value="{StaticResource ScrollBar.Vertical.CollapsedWidth}"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Thumb}">
          <Border x:Name="border" Width="{StaticResource ScrollBar.Vertical.Width}" Background="Transparent"
                  SnapsToDevicePixels="false" UseLayoutRounding="false">
            <Rectangle x:Name="rectangle" SnapsToDevicePixels="false" UseLayoutRounding="false"
                       Fill="{DynamicResource ScrollBar.Static.Thumb}"
                       Width="{StaticResource ScrollBar.VerticalThumb.CollapsedWidth}" VerticalAlignment="Stretch"
                       HorizontalAlignment="Right" RadiusX="1" RadiusY="1"
                       Height="{TemplateBinding FrameworkElement.Height}">
              <UIElement.RenderTransform>
                <TranslateTransform x:Name="VerticalThumbTrans" X="{StaticResource ScrollBar.Thumb.CollapsedOffset}"/>
              </UIElement.RenderTransform>
            </Rectangle>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="true">
              <Setter TargetName="rectangle" Value="{DynamicResource ScrollBar.MouseOver.Thumb}" Property="Shape.Fill"/>
            </Trigger>
            <Trigger Property="Thumb.IsDragging" Value="true">
              <Setter TargetName="rectangle" Value="{DynamicResource ScrollBar.Pressed.Thumb}" Property="Shape.Fill"/>
            </Trigger>
            <Trigger Property="local:ScrollBarHelper.ScrollBarSize" Value="Large">
              <Setter TargetName="border" Value="{StaticResource ScrollBar.Vertical.LargeWidth}"
                      Property="FrameworkElement.Width"/>
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Value="{StaticResource ScrollBarExpandedTag}" Property="FrameworkElement.Tag"/>
                <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Default"/>
              </MultiTrigger.Conditions>
              <TriggerBase.EnterActions>
                <StopStoryboard BeginStoryboardName="CollapsedLargeAnimation"/>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="ExpandDefaultAnimation">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="VerticalThumbTrans" Storyboard.TargetProperty="X"
                                     To="{StaticResource ScrollBar.Thumb.Offset}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Width"
                                     To="{StaticResource ScrollBar.VerticalThumb.Width}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="CollapsedDefaultAnimation"
                                 Storyboard="{StaticResource ModernScrollBarThumbVerticalCollapsedAnimation}"/>
              </TriggerBase.ExitActions>
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Value="{StaticResource ScrollBarExpandedTag}" Property="FrameworkElement.Tag"/>
                <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Large"/>
              </MultiTrigger.Conditions>
              <TriggerBase.EnterActions>
                <StopStoryboard BeginStoryboardName="CollapsedLargeAnimation"/>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <BeginStoryboard x:Name="ExpandLargeAnimation">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="VerticalThumbTrans" Storyboard.TargetProperty="X"
                                     To="{StaticResource ScrollBar.Thumb.LargeOffset}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Width"
                                     To="{StaticResource ScrollBar.VerticalThumb.LargeWidth}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="CollapsedLargeAnimation"
                                 Storyboard="{StaticResource ModernScrollBarThumbVerticalCollapsedAnimation}"/>
              </TriggerBase.ExitActions>
            </MultiTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ModernScrollBarThumbHorizontalStyle" TargetType="{x:Type Thumb}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="true"/>
    <Setter Property="Control.IsTabStop" Value="false"/>
    <Setter Property="FrameworkElement.MinHeight" Value="{StaticResource ScrollBar.Horizontal.CollapsedHeight}"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Thumb}">
          <Border x:Name="border" Height="{StaticResource ScrollBar.Horizontal.Height}" Background="Transparent"
                  SnapsToDevicePixels="false" UseLayoutRounding="false">
            <Rectangle x:Name="rectangle" SnapsToDevicePixels="false" UseLayoutRounding="false"
                       Fill="{DynamicResource ScrollBar.Static.Thumb}"
                       Height="{StaticResource ScrollBar.HorizontalThumb.CollapsedHeight}" VerticalAlignment="Bottom"
                       HorizontalAlignment="Stretch" RadiusX="1" RadiusY="1"
                       Width="{TemplateBinding FrameworkElement.Width}">
              <UIElement.RenderTransform>
                <TranslateTransform x:Name="HorizontalThumbTrans" Y="{StaticResource ScrollBar.Thumb.CollapsedOffset}"/>
              </UIElement.RenderTransform>
            </Rectangle>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="true">
              <Setter TargetName="rectangle" Value="{DynamicResource ScrollBar.MouseOver.Thumb}" Property="Shape.Fill"/>
            </Trigger>
            <Trigger Property="Thumb.IsDragging" Value="true">
              <Setter TargetName="rectangle" Value="{DynamicResource ScrollBar.Pressed.Thumb}" Property="Shape.Fill"/>
            </Trigger>
            <Trigger Property="local:ScrollBarHelper.ScrollBarSize" Value="Large">
              <Setter TargetName="border" Value="{StaticResource ScrollBar.Horizontal.LargeHeight}"
                      Property="FrameworkElement.Height"/>
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Value="{StaticResource ScrollBarExpandedTag}" Property="FrameworkElement.Tag"/>
                <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Default"/>
              </MultiTrigger.Conditions>
              <TriggerBase.EnterActions>
                <StopStoryboard BeginStoryboardName="CollapsedLargeAnimation"/>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="ExpandDefaultAnimation">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="HorizontalThumbTrans" Storyboard.TargetProperty="Y"
                                     To="{StaticResource ScrollBar.Thumb.Offset}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Height"
                                     To="{StaticResource ScrollBar.HorizontalThumb.Height}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="CollapsedDefaultAnimation"
                                 Storyboard="{StaticResource ModernScrollBarThumbHorizontalCollapsedAnimation}"/>
              </TriggerBase.ExitActions>
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Value="{StaticResource ScrollBarExpandedTag}" Property="FrameworkElement.Tag"/>
                <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Large"/>
              </MultiTrigger.Conditions>
              <TriggerBase.EnterActions>
                <StopStoryboard BeginStoryboardName="CollapsedLargeAnimation"/>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <BeginStoryboard x:Name="ExpandLargeAnimation">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusX" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="RadiusY" To="3"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="HorizontalThumbTrans" Storyboard.TargetProperty="Y"
                                     To="{StaticResource ScrollBar.Thumb.LargeOffset}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                    <DoubleAnimation Storyboard.TargetName="rectangle" Storyboard.TargetProperty="Height"
                                     To="{StaticResource ScrollBar.HorizontalThumb.LargeHeight}"
                                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <StopStoryboard BeginStoryboardName="CollapsedDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandDefaultAnimation"/>
                <StopStoryboard BeginStoryboardName="ExpandLargeAnimation"/>
                <BeginStoryboard x:Name="CollapsedLargeAnimation"
                                 Storyboard="{StaticResource ModernScrollBarThumbHorizontalCollapsedAnimation}"/>
              </TriggerBase.ExitActions>
            </MultiTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Storyboard x:Key="ModernScrollBar_ShowVerticalScrollBarAnimation"
              BeginTime="{StaticResource ScrollBarExpandBeginTime}">
    <DoubleAnimation Storyboard.TargetName="VerticalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineUpButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineDownButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_ShowVerticalScrollBarAnimation_Immediately">
    <DoubleAnimation Storyboard.TargetName="VerticalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineUpButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineDownButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_HideVerticalScrollBarAnimation"
              BeginTime="{StaticResource ScrollBarCollapsedDelay}">
    <DoubleAnimation Storyboard.TargetName="VerticalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineUpButton" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineDownButton" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarCollapsedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_ShowVerticalScrollBarAnimation_WithoutTransitions">
    <DoubleAnimation Storyboard.TargetName="VerticalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineUpButton" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineDownButton" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_HideVerticalScrollBarAnimation_WithoutTransitions">
    <DoubleAnimation Storyboard.TargetName="VerticalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineUpButton" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineDownButton" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarCollapsedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_ShowHorizontalScrollBarAnimation"
              BeginTime="{StaticResource ScrollBarExpandBeginTime}">
    <DoubleAnimation Storyboard.TargetName="HorizontalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineLeftButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineRightButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_ShowHorizontalScrollBarAnimation_Immediately">
    <DoubleAnimation Storyboard.TargetName="HorizontalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineLeftButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineRightButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_HideHorizontalScrollBarAnimation"
              BeginTime="{StaticResource ScrollBarCollapsedDelay}">
    <DoubleAnimation Storyboard.TargetName="HorizontalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineLeftButton" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineRightButton" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="{StaticResource ScrollBarOpacityChangeDuration}"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarCollapsedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_ShowHorizontalScrollBarAnimation_WithoutTransitions">
    <DoubleAnimation Storyboard.TargetName="HorizontalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineLeftButton" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineRightButton" Storyboard.TargetProperty="Opacity" To="1"
                     Duration="0"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarExpandedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <Storyboard x:Key="ModernScrollBar_HideHorizontalScrollBarAnimation_WithoutTransitions">
    <DoubleAnimation Storyboard.TargetName="HorizontalBackgroundBorder" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineLeftButton" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
    <DoubleAnimation Storyboard.TargetName="PART_LineRightButton" Storyboard.TargetProperty="Opacity" To="0"
                     Duration="0"/>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalThumb" Storyboard.TargetProperty="Tag" Duration="0">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ScrollBarCollapsedTag}"/>
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
  <ControlTemplate x:Key="ModernScrollBarVerticalTemplate" TargetType="{x:Type ScrollBar}">
    <Grid x:Name="Bg" Background="Transparent" SnapsToDevicePixels="true">
      <Grid.RowDefinitions>
        <RowDefinition MaxHeight="{StaticResource ScrollBar.VerticalButton.Height}"/>
        <RowDefinition Height="0.00001*"/>
        <RowDefinition MaxHeight="{StaticResource ScrollBar.VerticalButton.Height}"/>
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="0"/>
      </Grid.ColumnDefinitions>
      <Border x:Name="VerticalBackgroundBorder" BorderThickness="{TemplateBinding Control.BorderThickness}"
              Grid.RowSpan="3" CornerRadius="6" Opacity="0" SnapsToDevicePixels="false" UseLayoutRounding="false"
              Background="{TemplateBinding Control.Background}"
              BorderBrush="{TemplateBinding Control.BorderBrush}"/>
      <RepeatButton x:Name="PART_LineUpButton" Opacity="0" Command="{x:Static ScrollBar.LineUpCommand}"
                    IsEnabled="{TemplateBinding UIElement.IsMouseOver}" Style="{StaticResource ScrollBarButton}"
                    Padding="0,1">
        <Path x:Name="ArrowTop"
              Data="F1 M 2.480469,17.5 C 2.135417,17.5 1.813151,17.433268 1.513672,17.299805 1.214193,17.166342 0.952148,16.987305 0.727539,16.762695 0.50293,16.538086 0.325521,16.274414 0.195312,15.97168 0.065104,15.668945 0,15.345053 0,15 0,14.726562 0.037435,14.475912 0.112305,14.248047 0.187174,14.020183 0.299479,13.795573 0.449219,13.574219 L 6.953125,4.111328 C 7.122396,3.863934 7.320963,3.645834 7.548828,3.457031 7.776692,3.26823 8.022461,3.110352 8.286133,2.983398 8.549805,2.856445 8.828125,2.760418 9.121094,2.695312 9.414062,2.630209 9.707031,2.597656 10,2.597656 10.292969,2.597656 10.585938,2.630209 10.878906,2.695312 11.171875,2.760418 11.450195,2.856445 11.713867,2.983398 11.977539,3.110352 12.223307,3.26823 12.451172,3.457031 12.679036,3.645834 12.877604,3.863934 13.046875,4.111328 L 19.550781,13.574219 C 19.70052,13.795573 19.812824,14.020183 19.887695,14.248047 19.962564,14.475912 20,14.726562 20,15 20,15.345053 19.934895,15.668945 19.804688,15.97168 19.674479,16.274414 19.498697,16.538086 19.277344,16.762695 19.055988,16.987305 18.793945,17.166342 18.491211,17.299805 18.188477,17.433268 17.867838,17.5 17.529297,17.5 Z"
              Stretch="Uniform" Width="8.5" Height="8.5" Fill="{DynamicResource ScrollBar.Static.Glyph}"/>
      </RepeatButton>
      <Track x:Name="PART_Track" IsDirectionReversed="true" IsEnabled="{TemplateBinding UIElement.IsMouseOver}"
             Grid.Row="1">
        <FrameworkElement.Resources>
          <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarButtonHeightKey}">80</sys:Double>
        </FrameworkElement.Resources>
        <Track.DecreaseRepeatButton>
          <RepeatButton Command="{x:Static ScrollBar.PageUpCommand}" Style="{StaticResource RepeatButtonTransparent}"/>
        </Track.DecreaseRepeatButton>
        <Track.IncreaseRepeatButton>
          <RepeatButton Command="{x:Static ScrollBar.PageDownCommand}" Style="{StaticResource RepeatButtonTransparent}"/>
        </Track.IncreaseRepeatButton>
        <Track.Thumb>
          <Thumb x:Name="VerticalThumb" Style="{StaticResource ModernScrollBarThumbVerticalStyle}"/>
        </Track.Thumb>
      </Track>
      <RepeatButton x:Name="PART_LineDownButton" Opacity="0" Command="{x:Static ScrollBar.LineDownCommand}"
                    IsEnabled="{TemplateBinding UIElement.IsMouseOver}" Grid.Row="2"
                    Style="{StaticResource ScrollBarButton}" Padding="0,1">
        <Path x:Name="ArrowBottom"
              Data="F1 M 1.25,6.572266 C 1.25,6.357422 1.289062,6.1556 1.367188,5.966797 1.445312,5.777995 1.554362,5.611979 1.694336,5.46875 1.83431,5.325521 1.99707,5.211589 2.182617,5.126953 2.368164,5.042318 2.568359,5.000001 2.783203,5 L 17.216797,5 C 17.431641,5.000001 17.631836,5.042318 17.817383,5.126953 18.00293,5.211589 18.165689,5.325521 18.305664,5.46875 18.445637,5.611979 18.554688,5.777995 18.632812,5.966797 18.710938,6.1556 18.75,6.357422 18.75,6.572266 18.75,6.962891 18.623047,7.304688 18.369141,7.597656 L 11.611328,15.498047 C 11.402994,15.738933 11.162109,15.924479 10.888672,16.054688 10.615234,16.184896 10.31901,16.25 10,16.25 9.680989,16.25 9.384766,16.184896 9.111328,16.054688 8.837891,15.924479 8.597005,15.738933 8.388672,15.498047 L 1.630859,7.597656 C 1.376953,7.304688 1.25,6.962891 1.25,6.572266 Z"
              Stretch="Uniform" Width="8.5" Height="8.5" Fill="{DynamicResource ScrollBar.Static.Glyph}"/>
      </RepeatButton>
    </Grid>
    <ControlTemplate.Triggers>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineDownButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineDownButton, Path=IsPressed}" Value="true"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowBottom" Value="{DynamicResource ScrollBar.Pressed.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineUpButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineUpButton, Path=IsPressed}" Value="true"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowTop" Value="{DynamicResource ScrollBar.Pressed.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineDownButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineDownButton, Path=IsPressed}" Value="false"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowBottom" Value="{DynamicResource ScrollBar.MouseOver.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineUpButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineUpButton, Path=IsPressed}" Value="false"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowTop" Value="{DynamicResource ScrollBar.MouseOver.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <Trigger Property="local:ScrollBarHelper.IndicatorMode" Value="Expanded">
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation"/>
          <BeginStoryboard Storyboard="{StaticResource ModernScrollBar_ShowVerticalScrollBarAnimation_WithoutTransitions}"/>
        </TriggerBase.EnterActions>
      </Trigger>
      <Trigger Property="local:ScrollBarHelper.IndicatorMode" Value="Collapsed">
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation"/>
          <BeginStoryboard Storyboard="{StaticResource ModernScrollBar_HideVerticalScrollBarAnimation_WithoutTransitions}"/>
        </TriggerBase.EnterActions>
      </Trigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="UIElement.IsMouseOver" Value="true"/>
          <Condition Property="local:ScrollBarHelper.IndicatorMode" Value="Auto"/>
          <Condition Property="local:ScrollBarHelper.ShowScrollBarImmediately" Value="false"/>
        </MultiTrigger.Conditions>
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation"/>
          <BeginStoryboard x:Name="ShowVerticalScrollBarAnimation"
                           Storyboard="{StaticResource ModernScrollBar_ShowVerticalScrollBarAnimation}"/>
        </TriggerBase.EnterActions>
        <TriggerBase.ExitActions>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation"/>
          <BeginStoryboard x:Name="HideVerticalScrollBarAnimation"
                           Storyboard="{StaticResource ModernScrollBar_HideVerticalScrollBarAnimation}"/>
        </TriggerBase.ExitActions>
      </MultiTrigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="UIElement.IsMouseOver" Value="true"/>
          <Condition Property="local:ScrollBarHelper.IndicatorMode" Value="Auto"/>
          <Condition Property="local:ScrollBarHelper.ShowScrollBarImmediately" Value="true"/>
        </MultiTrigger.Conditions>
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation"/>
          <BeginStoryboard x:Name="ShowVerticalScrollBarAnimation_Immediately"
                           Storyboard="{StaticResource ModernScrollBar_ShowVerticalScrollBarAnimation_Immediately}"/>
        </TriggerBase.EnterActions>
        <TriggerBase.ExitActions>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="ShowVerticalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideVerticalScrollBarAnimation"/>
          <BeginStoryboard x:Name="HideVerticalScrollBarAnimation_Immediately"
                           Storyboard="{StaticResource ModernScrollBar_HideVerticalScrollBarAnimation}"/>
        </TriggerBase.ExitActions>
      </MultiTrigger>
      <Trigger Property="UIElement.IsEnabled" Value="false">
        <Setter TargetName="ArrowTop" Value="{DynamicResource ScrollBar.Disabled.Glyph}" Property="Shape.Fill"/>
        <Setter TargetName="ArrowBottom" Value="{DynamicResource ScrollBar.Disabled.Glyph}" Property="Shape.Fill"/>
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
  <ControlTemplate x:Key="ModernScrollBarHorizontalTemplate" TargetType="{x:Type ScrollBar}">
    <Grid x:Name="Bg" Background="Transparent" SnapsToDevicePixels="true">
      <Grid.ColumnDefinitions>
        <ColumnDefinition MaxWidth="{StaticResource ScrollBar.HorizontalButton.Width}"/>
        <ColumnDefinition Width="0.00001*"/>
        <ColumnDefinition MaxWidth="{StaticResource ScrollBar.HorizontalButton.Width}"/>
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="0"/>
      </Grid.RowDefinitions>
      <Border x:Name="HorizontalBackgroundBorder" BorderThickness="{TemplateBinding Control.BorderThickness}"
              Grid.ColumnSpan="3" CornerRadius="6" Opacity="0" SnapsToDevicePixels="false"
              UseLayoutRounding="false" Background="{TemplateBinding Control.Background}"
              BorderBrush="{TemplateBinding Control.BorderBrush}"/>
      <RepeatButton x:Name="PART_LineLeftButton" Opacity="0" Command="{x:Static ScrollBar.LineLeftCommand}"
                    IsEnabled="{TemplateBinding UIElement.IsMouseOver}" Style="{StaticResource ScrollBarButton}"
                    Padding="1,0">
        <Path x:Name="ArrowLeft"
              Data="F1 M 2.5,10 C 2.5,9.388021 2.643229,8.813477 2.929688,8.276367 3.216146,7.739258 3.610026,7.298178 4.111328,6.953125 L 13.574219,0.449219 C 13.795572,0.29948 14.020182,0.187176 14.248047,0.112305 14.47591,0.037436 14.726562,0 15,0 15.338541,0 15.660807,0.065105 15.966797,0.195312 16.272785,0.325521 16.538086,0.50293 16.762695,0.727539 16.987305,0.952148 17.16634,1.214193 17.299805,1.513672 17.433268,1.813152 17.5,2.135418 17.5,2.480469 L 17.5,17.519531 C 17.5,17.864584 17.433268,18.18685 17.299805,18.486328 17.16634,18.785807 16.987305,19.047852 16.762695,19.272461 16.538086,19.49707 16.272785,19.674479 15.966797,19.804688 15.660807,19.934896 15.338541,20 15,20 14.485677,20 14.010416,19.85026 13.574219,19.550781 L 4.111328,13.046875 C 3.610026,12.701823 3.216146,12.260742 2.929688,11.723633 2.643229,11.186523 2.5,10.611979 2.5,10 Z"
              Stretch="Uniform" Width="8.5" Height="8.5" Margin="2,0"
              Fill="{DynamicResource ScrollBar.Static.Glyph}"/>
      </RepeatButton>
      <Track x:Name="PART_Track" Grid.Column="1" IsEnabled="{TemplateBinding UIElement.IsMouseOver}">
        <FrameworkElement.Resources>
          <sys:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}">80</sys:Double>
        </FrameworkElement.Resources>
        <Track.DecreaseRepeatButton>
          <RepeatButton Command="{x:Static ScrollBar.PageLeftCommand}" Style="{StaticResource RepeatButtonTransparent}"/>
        </Track.DecreaseRepeatButton>
        <Track.IncreaseRepeatButton>
          <RepeatButton Command="{x:Static ScrollBar.PageRightCommand}" Style="{StaticResource RepeatButtonTransparent}"/>
        </Track.IncreaseRepeatButton>
        <Track.Thumb>
          <Thumb x:Name="HorizontalThumb" Style="{StaticResource ModernScrollBarThumbHorizontalStyle}"/>
        </Track.Thumb>
      </Track>
      <RepeatButton x:Name="PART_LineRightButton" Opacity="0" Grid.Column="2"
                    Command="{x:Static ScrollBar.LineRightCommand}" IsEnabled="{TemplateBinding UIElement.IsMouseOver}"
                    Style="{StaticResource ScrollBarButton}" Padding="1,0">
        <Path x:Name="ArrowRight"
              Data="F1 M 2.5,17.519531 L 2.5,2.480469 C 2.5,2.135418 2.566732,1.813152 2.700195,1.513672 2.833659,1.214193 3.012695,0.952148 3.237305,0.727539 3.461914,0.50293 3.725586,0.325521 4.02832,0.195312 4.331055,0.065105 4.654948,0 5,0 5.514323,0 5.989583,0.14974 6.425781,0.449219 L 15.888672,6.953125 C 16.396484,7.304688 16.791992,7.747396 17.075195,8.28125 17.358398,8.815104 17.5,9.388021 17.5,10 17.5,10.611979 17.358398,11.184896 17.075195,11.71875 16.791992,12.252604 16.396484,12.695312 15.888672,13.046875 L 6.425781,19.550781 C 5.989583,19.85026 5.514323,20 5,20 4.654948,20 4.331055,19.934896 4.02832,19.804688 3.725586,19.674479 3.461914,19.49707 3.237305,19.272461 3.012695,19.047852 2.833659,18.785807 2.700195,18.486328 2.566732,18.18685 2.5,17.864584 2.5,17.519531 Z"
              Stretch="Uniform" Width="8.5" Height="8.5" Margin="2,0"
              Fill="{DynamicResource ScrollBar.Static.Glyph}"/>
      </RepeatButton>
    </Grid>
    <ControlTemplate.Triggers>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineRightButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineRightButton, Path=IsPressed}" Value="true"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowRight" Value="{DynamicResource ScrollBar.Pressed.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineLeftButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineLeftButton, Path=IsPressed}" Value="true"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowLeft" Value="{DynamicResource ScrollBar.Pressed.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineRightButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineRightButton, Path=IsPressed}" Value="false"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowRight" Value="{DynamicResource ScrollBar.MouseOver.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ElementName=PART_LineLeftButton, Path=IsMouseOver}" Value="true"/>
          <Condition Binding="{Binding ElementName=PART_LineLeftButton, Path=IsPressed}" Value="false"/>
        </MultiDataTrigger.Conditions>
        <Setter TargetName="ArrowLeft" Value="{DynamicResource ScrollBar.MouseOver.Glyph}" Property="Shape.Fill"/>
      </MultiDataTrigger>
      <Trigger Property="local:ScrollBarHelper.IndicatorMode" Value="Expanded">
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation"/>
          <BeginStoryboard Storyboard="{StaticResource ModernScrollBar_ShowHorizontalScrollBarAnimation_WithoutTransitions}"/>
        </TriggerBase.EnterActions>
      </Trigger>
      <Trigger Property="local:ScrollBarHelper.IndicatorMode" Value="Collapsed">
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation"/>
          <BeginStoryboard Storyboard="{StaticResource ModernScrollBar_HideHorizontalScrollBarAnimation_WithoutTransitions}"/>
        </TriggerBase.EnterActions>
      </Trigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="UIElement.IsMouseOver" Value="true"/>
          <Condition Property="local:ScrollBarHelper.IndicatorMode" Value="Auto"/>
          <Condition Property="local:ScrollBarHelper.ShowScrollBarImmediately" Value="false"/>
        </MultiTrigger.Conditions>
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation"/>
          <BeginStoryboard x:Name="ShowHorizontalScrollBarAnimation"
                           Storyboard="{StaticResource ModernScrollBar_ShowHorizontalScrollBarAnimation}"/>
        </TriggerBase.EnterActions>
        <TriggerBase.ExitActions>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation"/>
          <BeginStoryboard x:Name="HideHorizontalScrollBarAnimation"
                           Storyboard="{StaticResource ModernScrollBar_HideHorizontalScrollBarAnimation}"/>
        </TriggerBase.ExitActions>
      </MultiTrigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="UIElement.IsMouseOver" Value="true"/>
          <Condition Property="local:ScrollBarHelper.IndicatorMode" Value="Auto"/>
          <Condition Property="local:ScrollBarHelper.ShowScrollBarImmediately" Value="true"/>
        </MultiTrigger.Conditions>
        <TriggerBase.EnterActions>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation"/>
          <BeginStoryboard x:Name="ShowHorizontalScrollBarAnimation_Immediately"
                           Storyboard="{StaticResource ModernScrollBar_ShowHorizontalScrollBarAnimation_Immediately}"/>
        </TriggerBase.EnterActions>
        <TriggerBase.ExitActions>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation_Immediately"/>
          <StopStoryboard BeginStoryboardName="ShowHorizontalScrollBarAnimation"/>
          <StopStoryboard BeginStoryboardName="HideHorizontalScrollBarAnimation"/>
          <BeginStoryboard x:Name="HideHorizontalScrollBarAnimation_Immediately"
                           Storyboard="{StaticResource ModernScrollBar_HideHorizontalScrollBarAnimation}"/>
        </TriggerBase.ExitActions>
      </MultiTrigger>
      <Trigger Property="UIElement.IsEnabled" Value="false">
        <Setter TargetName="ArrowLeft" Value="{DynamicResource ScrollBar.Disabled.Glyph}" Property="Shape.Fill"/>
        <Setter TargetName="ArrowRight" Value="{DynamicResource ScrollBar.Disabled.Glyph}" Property="Shape.Fill"/>
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
  <Style x:Key="ModernScrollBarStyle" TargetType="{x:Type ScrollBar}">
    <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
    <Setter Property="Control.Background" Value="{DynamicResource ScrollBar.Static.Background}"/>
    <Setter Property="Control.BorderBrush" Value="Transparent"/>
    <Setter Property="Control.Foreground"
            Value="{DynamicResource {x:Static JetSystemColors.ControlTextBrushKey}}"/>
    <Setter Property="Control.BorderThickness" Value="0"/>
    <Setter Property="FrameworkElement.Width" Value="{StaticResource ScrollBar.Vertical.Width}"/>
    <Setter Property="FrameworkElement.MinWidth" Value="{StaticResource ScrollBar.Vertical.Width}"/>
    <Setter Property="FrameworkElement.Margin" Value="0,2"/>
    <Setter Property="Control.Template" Value="{StaticResource ModernScrollBarVerticalTemplate}"/>
    <Style.Triggers>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="ScrollBar.Orientation" Value="Vertical"/>
          <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Large"/>
        </MultiTrigger.Conditions>
        <Setter Property="FrameworkElement.Width" Value="{StaticResource ScrollBar.Vertical.LargeWidth}"/>
        <Setter Property="FrameworkElement.MinWidth" Value="{StaticResource ScrollBar.Vertical.LargeWidth}"/>
      </MultiTrigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="ScrollBar.Orientation" Value="Horizontal"/>
          <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Default"/>
        </MultiTrigger.Conditions>
        <Setter Property="FrameworkElement.Height" Value="{StaticResource ScrollBar.Horizontal.Height}"/>
        <Setter Property="FrameworkElement.MinHeight" Value="{StaticResource ScrollBar.Horizontal.Height}"/>
      </MultiTrigger>
      <MultiTrigger>
        <MultiTrigger.Conditions>
          <Condition Property="ScrollBar.Orientation" Value="Horizontal"/>
          <Condition Property="local:ScrollBarHelper.ScrollBarSize" Value="Large"/>
        </MultiTrigger.Conditions>
        <Setter Property="FrameworkElement.Height" Value="{StaticResource ScrollBar.Horizontal.LargeHeight}"/>
        <Setter Property="FrameworkElement.MinHeight" Value="{StaticResource ScrollBar.Horizontal.LargeHeight}"/>
      </MultiTrigger>
      <Trigger Property="ScrollBar.Orientation" Value="Horizontal">
        <Setter Property="FrameworkElement.Width" Value="Auto"/>
        <Setter Property="FrameworkElement.MinWidth" Value="0"/>
        <Setter Property="Control.BorderThickness" Value="0"/>
        <Setter Property="FrameworkElement.Margin" Value="2,0"/>
        <Setter Property="Control.Template" Value="{StaticResource ModernScrollBarHorizontalTemplate}"/>
      </Trigger>
    </Style.Triggers>
  </Style>
  <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource ModernScrollBarStyle}"/>
  <Style x:Key="{x:Static local:ScrollBarHelper.ModernScrollViewerStyleKey}"
         TargetType="{x:Type ScrollViewer}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="true"/>
    <Setter Property="local:ScrollBarHelper.EnableAutoHideExtension" Value="true"/>
    <Setter Property="local:ScrollBarHelper.DisableBoundaryFeedback" Value="true"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ScrollViewer}">
          <Grid>
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="ScrollingIndicatorStates">
                <VisualState x:Name="IndicatorVisible"/>
                <VisualState x:Name="AutoHide">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="PART_VerticalScrollBar" Storyboard.TargetProperty="Opacity" To="0"
                                     Duration="0"/>
                    <DoubleAnimation Storyboard.TargetName="PART_HorizontalScrollBar" Storyboard.TargetProperty="Opacity" To="0"
                                     Duration="0"/>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="AutoHidePointerOver"/>
                <VisualStateGroup.Transitions>
                  <VisualTransition From="AutoHide" To="IndicatorVisible">
                    <Storyboard>
                      <DoubleAnimation Storyboard.TargetName="PART_VerticalScrollBar" Storyboard.TargetProperty="Opacity" To="1"
                                       Duration="0:0:0.167"/>
                      <DoubleAnimation Storyboard.TargetName="PART_HorizontalScrollBar" Storyboard.TargetProperty="Opacity" To="1"
                                       Duration="0:0:0.167"/>
                    </Storyboard>
                  </VisualTransition>
                  <VisualTransition From="AutoHide" To="AutoHidePointerOver">
                    <Storyboard>
                      <DoubleAnimation Storyboard.TargetName="PART_VerticalScrollBar" Storyboard.TargetProperty="Opacity" To="1"
                                       Duration="0:0:0.167"/>
                      <DoubleAnimation Storyboard.TargetName="PART_HorizontalScrollBar" Storyboard.TargetProperty="Opacity" To="1"
                                       Duration="0:0:0.167"/>
                    </Storyboard>
                  </VisualTransition>
                  <VisualTransition From="AutoHidePointerOver" To="AutoHide">
                    <Storyboard BeginTime="0:0:2">
                      <DoubleAnimation Storyboard.TargetName="PART_VerticalScrollBar" Storyboard.TargetProperty="Opacity" To="0"
                                       Duration="0:0:0.167"/>
                      <DoubleAnimation Storyboard.TargetName="PART_HorizontalScrollBar" Storyboard.TargetProperty="Opacity" To="0"
                                       Duration="0:0:0.167"/>
                    </Storyboard>
                  </VisualTransition>
                </VisualStateGroup.Transitions>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid.ColumnDefinitions>
              <ColumnDefinition/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Border Grid.ColumnSpan="2" Grid.RowSpan="2" BorderThickness="0"
                    local:ScrollBarHelper.ScrollBarSize="Default" local:ScrollBarHelper.IndicatorMode="Auto"
                    local:ScrollBarHelper.AutoHide="false" local:ScrollBarHelper.ShowScrollBarImmediately="false">
              <ScrollContentPresenter CanContentScroll="{TemplateBinding ScrollViewer.CanContentScroll}"
                                      Margin="{TemplateBinding Control.Padding}"
                                      SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}"/>
            </Border>
            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="1"
                       Value="{TemplateBinding ScrollViewer.VerticalOffset}"
                       Maximum="{TemplateBinding ScrollViewer.ScrollableHeight}"
                       ViewportSize="{TemplateBinding ScrollViewer.ViewportHeight}"
                       Visibility="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=ComputedVerticalScrollBarVisibility}"/>
            <ScrollBar x:Name="PART_HorizontalScrollBar" Orientation="Horizontal" Grid.Row="1"
                       Value="{TemplateBinding ScrollViewer.HorizontalOffset}"
                       Maximum="{TemplateBinding ScrollViewer.ScrollableWidth}"
                       ViewportSize="{TemplateBinding ScrollViewer.ViewportWidth}"
                       Visibility="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=ComputedHorizontalScrollBarVisibility}"/>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style TargetType="{x:Type ScrollViewer}"
         BasedOn="{StaticResource {x:Static local:ScrollBarHelper.ModernScrollViewerStyleKey}}"/>
</ResourceDictionary>